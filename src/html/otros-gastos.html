<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Otros Gastos - Sistema POO</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="container">
        <!-- Navegaci√≥n -->
        <nav class="nav-bar">
                            <a href="index.html" class="nav-link"><img src="../storage/vectors/home-svgrepo-com.svg" alt="" class="home-icon">Inicio</a>
            <span class="nav-separator">|</span>
                            <a href="empleados.html" class="nav-link"><img src="../storage/vectors/user-svgrepo-com.svg" alt="" class="user-icon">Empleados</a>
            <span class="nav-separator">|</span>
                            <a href="materiales.html" class="nav-link"><img src="../storage/vectors/layers-svgrepo-com.svg" alt="" class="layers-icon">Materiales</a>
            <span class="nav-separator">|</span>
                            <span class="nav-current"><img src="../storage/vectors/briefcase-svgrepo-com.svg" alt="" class="briefcase-icon">Otros Gastos</span>
            <span class="nav-separator">|</span>
                            <a href="tareas.html" class="nav-link"><img src="../storage/vectors/clipboard-svgrepo-com.svg" alt="" class="clipboard-icon">Tareas</a>
            <span class="nav-separator">|</span>
                            <a href="#" onclick="abrirModalConfiguracion()" class="nav-link"><img src="../storage/vectors/settings-svgrepo-com.svg" alt="" class="settings-icon">Configuraci√≥n</a>
        </nav>

        <h1 class="section-header">üí∏ Gesti√≥n de Otros Gastos</h1>
        <div class="buttons-section">
            <button onclick="crearOtroGastoPersonalizado()" class="button button-success">
                ‚ûï Crear Otro Gasto
            </button>
            
            <button onclick="limpiarListaOtrosGastos()" class="button button-warning">
                <img src="../storage/vectors/trash-svgrepo-com.svg" alt="" class="trash-icon">Limpiar Lista
            </button>
            
            <button onclick="exportarOtrosGastos()" class="button button-success">
                üìÑ Exportar a Consola
            </button>
            
            <button onclick="mostrarRangosDetallados()" class="button button-info">
                <img src="../storage/vectors/clipboard-svgrepo-com.svg" alt="" class="clipboard-icon">Ver Detalles de Rangos
            </button>
        </div>

        <!-- Lista de Otros Gastos en la p√°gina principal -->
        <div class="empleados-container">
            <div class="empleados-header">
                <h2 class="section-header">üí∏ Lista de Otros Gastos (<span id="contadorOtrosGastos">0</span>)</h2>
            </div>
            
            <div id="estadisticasOtrosGastos" class="stats-panel">
                <!-- Estad√≠sticas se llenar√°n aqu√≠ -->
            </div>
            
            <div id="listaOtrosGastos" class="employees-list">
                <!-- Lista de otros gastos se llenar√° aqu√≠ -->
            </div>
        </div>

        <!-- Modal para Crear Otro Gasto -->
        <div id="modalCrearOtroGasto" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title"><img src="../storage/vectors/briefcase-svgrepo-com.svg" alt="" class="briefcase-icon-large">Crear Nuevo Otro Gasto</h2>
                    <button onclick="cerrarModalCrearOtroGasto()" class="modal-close">√ó</button>
                </div>
                
                <div class="modal-body">
                    <div class="config-panel">
                        <h3><img src="../storage/vectors/portrait-user-svgrepo-com.svg" alt="" class="portrait-user-icon-large"> Informaci√≥n del Otro Gasto</h3>
                        <p>Complete todos los campos para crear el otro gasto:</p>
                        
                        <div class="input-group">
                            <label for="nombreOtroGasto"><img src="../storage/vectors/briefcase-svgrepo-com.svg" alt="" class="briefcase-icon">Nombre del Gasto:</label>
                            <input type="text" id="nombreOtroGasto" placeholder="Ej: Servicios p√∫blicos">
                            <small id="errorNombreOtroGasto" class="error-message"></small>
                        </div>
                        
                        <div class="input-group">
                            <label for="costoPorUnidadOtroGasto"><img src="../storage/vectors/cash-register-svgrepo-com.svg" alt="" class="cash-register-icon"> Costo por Unidad ($):</label>
                            <input type="number" id="costoPorUnidadOtroGasto" step="0.01" min="0" placeholder="Ej: 25.00">
                            <small id="errorCostoPorUnidadOtroGasto" class="error-message"></small>
                        </div>
                        
                        <div class="info-note">
                            <strong><img src="../storage/vectors/traffic-light-svgrepo-com.svg" alt="" class="traffic-light-icon"> Informaci√≥n:</strong><br>
                            ‚Ä¢ <strong>Tipo de gasto:</strong> Gastos generales del proyecto<br>
                            ‚Ä¢ <strong>Validaci√≥n:</strong> El costo debe estar dentro del rango configurado<br>
                            ‚Ä¢ <strong>Caracteres prohibidos:</strong> No se permiten caracteres especiales en el nombre<br>
                            ‚Ä¢ <strong>Rango actual:</strong> <span id="rangoInfoOtroGasto">Cargando...</span>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button onclick="validarYCrearOtroGasto()" class="button button-success">
                        ‚úÖ Crear Otro Gasto
                    </button>
                    <button onclick="limpiarFormularioOtroGasto()" class="button button-info">
                        üîÑ Limpiar Campos
                    </button>
                    <button onclick="cerrarModalCrearOtroGasto()" class="button">
                        ‚ùå Cancelar
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Modal de Configuraci√≥n -->
        <div id="modalConfiguracion" class="modal">
            <div class="modal-content config-modal">
                <div class="modal-header">
                    <h2 class="modal-title"><img src="../storage/vectors/settings-svgrepo-com.svg" alt="" class="settings-icon-large">Configuraci√≥n Global del Sistema</h2>
                    <button onclick="cerrarModalConfiguracion()" class="modal-close">√ó</button>
                </div>
                
                <div class="modal-body config-content">
                    <div class="config-panel">
                        <h2><img src="../storage/vectors/briefcase-svgrepo-com.svg" alt="" class="briefcase-icon-large">Configuraci√≥n de Rangos para Otros Gastos</h2>
                        <p>Define los rangos espec√≠ficos para otros gastos del proyecto:</p>
                        
                        <div class="config-grid">
                            <div class="input-group">
                                <label for="costoOtrosGastosMin"><img src="../storage/vectors/cash-register-svgrepo-com.svg" alt="" class="cash-register-icon"> Costo Otros Gastos - M√≠nimo ($):</label>
                                <input type="number" id="costoOtrosGastosMin" value="1" step="0.01">
                            </div>
                            
                            <div class="input-group">
                                <label for="costoOtrosGastosMax"><img src="../storage/vectors/cash-register-svgrepo-com.svg" alt="" class="cash-register-icon"> Costo Otros Gastos - M√°ximo ($):</label>
                                <input type="number" id="costoOtrosGastosMax" value="500" step="0.01">
                            </div>
                        </div>
                        
                        <div class="info-note">
                            <strong><img src="../storage/vectors/traffic-light-svgrepo-com.svg" alt="" class="traffic-light-icon"> Nota:</strong> Estos rangos se aplicar√°n espec√≠ficamente a otros gastos:<br>
                            <strong><img src="../storage/vectors/cash-register-svgrepo-com.svg" alt="" class="cash-register-icon"> Costo por Unidad:</strong> Validaci√≥n para gastos generales del proyecto<br>
                            <strong>Tipo de Gastos:</strong> Servicios, suministros, gastos operativos, etc.<br>
                            <strong>‚ö° Aplicaci√≥n:</strong> Los cambios se aplicar√°n inmediatamente en la creaci√≥n de otros gastos
                        </div>
                        
                        <div class="range-display-container">
                            <div id="rangosActuales" class="range-display">
                                <strong>Rangos configurados:</strong><br>
                                Otros Gastos: $1.00 - $500.00
                            </div>
                        </div>
                        
                        <button onclick="aplicarConfiguracionRangosOtrosGastos()" class="button button-success">
                            ‚úÖ Aplicar Configuraci√≥n de Otros Gastos
                        </button>
                    </div>

                    <div class="config-panel">
                        <h2>üîß Configuraci√≥n de Validaci√≥n</h2>
                        
                        <div class="config-grid">
                            <div class="input-group">
                                <label for="validacionEstricta">üîí Validaci√≥n Estricta de Nombres:</label>
                                <select id="validacionEstricta">
                                    <option value="true">Activada (Recomendado)</option>
                                    <option value="false">Desactivada</option>
                                </select>
                            </div>
                            
                            <div class="input-group">
                                <label for="mostrarConsejos">üí° Mostrar Consejos de Validaci√≥n:</label>
                                <select id="mostrarConsejos">
                                    <option value="true">Activados</option>
                                    <option value="false">Desactivados</option>
                                </select>
                            </div>
                        </div>
                        
                        <button onclick="aplicarConfiguracionValidacion()" class="button button-primary">
                            ‚úÖ Aplicar Configuraci√≥n de Validaci√≥n
                        </button>
                    </div>

                    <div class="config-panel">
                        <h2>üíæ Gesti√≥n de Datos del Sistema</h2>
                        
                        <div class="config-grid">
                            <button onclick="exportarConfiguracion()" class="button button-info">
                                üì§ Exportar Configuraci√≥n
                            </button>
                            
                            <button onclick="resetearConfiguracion()" class="button button-warning">
                                üîÑ Restaurar Configuraci√≥n
                            </button>
                            
                            <button onclick="limpiarDatosSistema()" class="button button-danger">
                                <img src="../storage/vectors/trash-svgrepo-com.svg" alt="" class="trash-icon">Limpiar Datos del Sistema
                            </button>
                        </div>
                        
                        <div id="estadisticasSistema" class="stats-info">
                            <!-- Estad√≠sticas del sistema se mostrar√°n aqu√≠ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="../js/Personal.js"></script>
    <script src="../js/Material.js"></script>
    <script src="../js/OtrosCostos.js"></script>
    <script src="../js/OtrosGastos.js"></script>
    <script src="../js/otros-gastos.js"></script>
</body>
</html>